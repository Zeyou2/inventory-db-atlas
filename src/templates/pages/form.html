{% extends "index.html" %}
{% block content %}
<div class="container mt-4">
    <div class="page-header mb-4">

        <h1 class="display-4 text-center">Cadastro de {{ title.capitalize() }}</h1>
    </div>
    <form action="{{ url_for('send', collection_name=title) }}" method="POST">

        <fieldset>
            {% for x in field %}
            <div class="form-group" style="font-weight: bold;">
                {% if x == "Registro de Entrada" %}
                <label for="{{ x }}">Registro de Entrada</label>
                <input type="{{ x['resp_type'] }}" id="{{ x }}" name="{{ x['pergunta'] }}" class="form-control" {{ x["em_branco"] }}>
                {% elif x == "Data de registro" %}
                <label for="{{ x }}">{{ x['pergunta']}}</label>
                <input id="{{ x }}" type="date" value="{{date}}" disabled>
                {% elif x['pergunta'] == "Categoria do Produto" %}
                <label for="{{ x['pergunta'] }}">{{ x['pergunta'] }}</label>
                <select id="categoria" name="categoria" class="form-control" onchange="toggleNewCategory(this)" >
                    <option value="">Selecione uma Categoria</option>
                    {% for y in cat %}
                        <option value="{{ y['Categoria'] }}">{{ y['Categoria'] }}</option>
                    {% endfor %}

                    <option value="nova_categoria">Nova Categoria</option>
                 
                </select>
                    {% if categoria == nova_categoria %}
                    <input type="text" id="nova_categoria_input" name="nova_categoria" class="form-control mt-2" placeholder="Digite nova categoria" style="display: none;">
                    {% endif %}

                {% else %}
                    <label for="{{ x['pergunta'] }}">{{ x['pergunta'] }}</label>
                    <input type="{{ x['resp_type'] }}" id="{{ x['pergunta'] }}" name="{{ x['pergunta'] }}" class="form-control" {{ x["em_branco"] }}>
                {% endif %}
                </div>
                 {% endfor %}
            <button type="submit" class="btn btn-primary">Salvar</button>
        </fieldset>
        <script>
            // Função para exibir o campo de nova categoria se "Nova Categoria" for selecionado
            function toggleNewCategory(select) {
                const newCategoryInput = document.getElementById('nova_categoria_input');
                if (select.value === "nova_categoria") {
                    newCategoryInput.style.display = "block";
                } else {
                    newCategoryInput.style.display = "none";
                }
            }
        </script>
    </form>
</div>
</div>
</div>
{% endblock %}